# GitHub Pages 배포 설정

GitHub Pages를 사용하여 프로젝트를 배포하기 위한 설정 가이드입니다.

## 1. vite.config.ts 수정

GitHub Pages 배포를 위해 `vite.config.ts`에 다음 설정을 추가해야 합니다.

### 주요 변경사항

#### base 경로 설정
GitHub Pages는 저장소 이름을 URL 경로로 사용하므로, `base` 옵션을 설정해야 합니다.

```typescript
base: '/smart-monthly-budget-planner/',
```

#### 빌드 출력 디렉토리 설정
빌드된 파일이 저장될 디렉토리를 명시합니다.

```typescript
build: {
  outDir: 'dist',
}
```

### 전체 vite.config.ts 예시

```typescript
import path from 'path';
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  base: '/smart-monthly-budget-planner/',
  server: {
    port: 3000,
    host: '0.0.0.0',
  },
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, '.'),
    }
  },
  build: {
    outDir: 'dist',
  }
});
```

## 2. GitHub Actions 자동 배포 설정

`.github/workflows/deploy.yml` 파일을 생성하여 자동 배포를 설정합니다.

### deploy.yml 전체 내용

```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches: ["main"]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: npm

      - run: npm ci
      - run: npm run build

      - uses: actions/upload-pages-artifact@v3
        with:
          path: dist

  deploy:
    needs: build
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    steps:
      - id: deployment
        uses: actions/deploy-pages@v4
```

### 설정 설명

#### 트리거 (on)
- `push` on `main`: main 브랜치에 push될 때 자동 실행
- `workflow_dispatch`: 수동으로 실행 가능

#### 권한 (permissions)
- `contents: read`: 저장소 읽기 권한
- `pages: write`: GitHub Pages 쓰기 권한
- `id-token: write`: OIDC 토큰 권한

#### 빌드 작업 (build job)
1. 코드 체크아웃
2. Node.js 20 설치 및 npm 캐시 설정
3. 의존성 설치 (`npm ci`)
4. 프로젝트 빌드 (`npm run build`)
5. 빌드 결과물을 artifact로 업로드

#### 배포 작업 (deploy job)
- 빌드 작업 완료 후 실행
- `github-pages` 환경으로 배포
- 배포된 페이지 URL 출력

## 3. GitHub 저장소 설정

### Pages 설정 활성화

1. GitHub 저장소로 이동
2. **Settings** > **Pages** 메뉴 선택
3. **Source**를 **GitHub Actions**로 선택
4. 저장

### 배포 확인

- 배포가 완료되면 `https://trance81.github.io/smart-monthly-budget-planner/` 에서 접근 가능합니다.
- Actions 탭에서 배포 상태를 확인할 수 있습니다.

## 4. 배포 프로세스

1. 코드 변경 후 main 브랜치에 push
2. GitHub Actions가 자동으로 실행
3. 빌드 및 배포 자동 완료
4. 약 1-2분 후 사이트 접근 가능

## 참고사항

- `base` 경로는 저장소 이름과 일치해야 합니다.
- 첫 배포는 수동으로 Actions를 실행하거나 main 브랜치에 push해야 합니다.
- 배포 실패 시 Actions 탭에서 로그를 확인할 수 있습니다.
